version: "2.4"

services:
  jenkins:
    image: jenkins/jenkins:lts
    privileged: true
    user: root
    ports:
          [8081:8080]
    container_name: jenkins_latest_4
    volumes:
         - ~/jenkins:/var/jenkins_home
    
  progrid:
    image: selenium/hub:3.141.59
    container_name: selenium_hub
    ports: 
      [4444:4444]
  
  nodechrome:
        image: selenium/node-chrome:3.141.59
        scale: 5
        privileged: true
        depends_on:
          - progrid
        ports:
          - 5900
        environment:
          - HUB_PORT_4444_TCP_ADDR=progrid
          - HUB_PORT_4444_TCP_PORT=4444
